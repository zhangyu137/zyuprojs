<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>今日记录</title>
		<link href="../css/record-today.css" rel="stylesheet" />
	</head>
	<body>
		<div id="container">
			<div id="title"><h2 style="text-align: center;">--- &nbsp; 每日记录 &nbsp; ---</h2></div>
			<div id="content">
				<form name="form1">
					<table width="100%" cellspacing="0">
						<tr><td colspan="2" style="text-align: center;color: red;" id="tip">&nbsp;</td></tr>
						<tr>
							<td width="46%">今日早餐</td>
							<td><input name="zaorl" id="zaor1"/><span>*</span></td>
							<td><input type="button" value="保存"   onclick="doAdd1()"/></td>
						</tr>
						<tr>
							<td>今日午餐</td>
							<td><input name="zhongrl" id="zhongrl"/><span>*</span></td>
							<td><input type="button" value="保存"   onclick="doAdd2()"/></td>
						</tr>
						<tr>
							<td>今日晚餐</td>
							<td><input name="wanrl" id="wanrl"/><span>*</span></td>
							<td><input type="button" value="保存"   onclick="doAdd3()"/></td>
						</tr>
					</table>
				</form>
		</div>
	</body>
	<script src="../js/jquery-1.8.0.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
	user = sessionStorage.getItem("yh");
	yh = JSON.parse(user);
	/** 食物名 校验 */
	function checkZaorl(){
		if(form1.zaorl.value == ''){
			$("#zaorl").next().html("食物名不能为空");
			return false;
		}else{
			$("#zaorl").next().html("*");
			return true;
		}
	}
	$("[name='zaorl']").blur(function(){
	 	checkZaorl();
	});
	
	function checkZhongrl(){
		if(form1.zhongrl.value == ''){
			$("#zhongrl").next().html("食物名不能为空");
			return false;
		}else{
			$("#zhongrl").next().html("*");
			return true;
		}
	}
	$("[name='zhongrl']").blur(function(){
	 	checkZhongrl();
	});
	
	function checkWanrl(){
		if(form1.wanrl.value == ''){
			$("#wanrl").next().html("食物名不能为空");
			return false;
		}else{
			$("#wanrl").next().html("*");
			return true;
		}
	}
	$("[name='wanrl']").blur(function(){
	 	checkWanrl();
	});
	
	/** 新增保存*/
	function doAdd1(){
		if(checkZaorl()){
			$.post("/DietManagementSystem/DairyController/add.do",
					{	
						uno:yh.uno,
						zaorl:$("#zaorl").val()
					},
					function(ret){
						if(ret == true){
							$("#tip").html("添加成功！");
						}else{
							$("#tip").html("添加失败！");
						}
					},
			);
		}
	}
	
	function doAdd2(){
		if(checkZhongrl()){
			$.post("/DietManagementSystem/DairyController/add.do",
					{	
						uno:yh.uno,
						zhongrl:$("#zhongrl").val()
					},
					function(ret){
						if(ret == true){
							$("#tip").html("添加成功！");
						}else{
							$("#tip").html("添加失败！");
						}
					},
			);
		}
	}
	function doAdd3(){
		if(checkWanrl()){
			$.post("/DietManagementSystem/DairyController/add.do",
					{	
						uno:yh.uno,
						wanrl:$("#wanrl").val()
					},
					function(ret){
						if(ret == true){
							$("#tip").html("添加成功！");
						}else{
							$("#tip").html("添加失败！");
						}
					},
			);
		}
	}
	</script>
	
</html>
